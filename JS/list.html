<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"> 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    </head>
    <link href="css/main.css" rel="stylesheet">
    
    <body>
        
       <!-- <div class="card-group container">
          <div class="card">
            <img src="https://via.placeholder.com/600">
            <div class="card-body">
              <h5>Card title</h5>
              <p>가격 : 70000</p>
              <button class="btn btn-danger">주문하기</button>
            </div>
          </div>
          <div class="card">
            <img src="https://via.placeholder.com/600">
            <div class="card-body">
              <h5>Card title</h5>
              <p>가격 : 70000</p>
              <button class="btn btn-danger">주문하기</button>
            </div>
          </div>
          <div class="card">
            <img src="https://via.placeholder.com/600">
            <div class="card-body">
              <h5>Card title</h5>
              <p>가격 : 70000</p>
              <button class="btn btn-danger">주문하기</button>
            </div>
          </div>
        </div>-->

        <div class="container">
            <div class="row">

      <!--<div class="col-sm-4">
        <img src="https://via.placeholder.com/600" class="w-100">
        <h5>Card title</h5>
        <p>가격 : 70000</p>
      </div>-->
                
            </div>
        </div> 
        
        <div class="container my-3">
        <button class="btn btn-danger" id="price">가격순 정렬</button>
        </div> 
        
        <div class="container my-3">
        <button class="btn btn-danger" id="sort1">다나가순 정렬</button>
        </div>
        
        <div class="container my-3">
        <button class="btn btn-danger" id="filter">6만원 이하</button>
        </div>
        
<script>
  var products = [
    { id : 0, price : 70000, title : 'Blossom Dress' },
    { id : 1, price : 50000, title : 'Springfield Shirt' },
    { id : 2, price : 60000, title : 'Black Monastery' }
  ];
    
    
    $('#price').click(function(){
        products.sort(function(a,b){
            return a.price - b.price
        });
        
        $('.row').html('');
        
         products.forEach(function(a,i){  
        var 템플릿 =
            `<div class="col-sm-4">
            <img src="https://via.placeholder.com/600" class="w-100">
            <h5>${a.title}</h5>
            <p>가격 : ${a.price}</p>
            </div>`;
        $('.row').append(템플릿)
    })
        
    })
    
    $('#sort1').click(function(){
        products.sort(function(a,b){
        if(a.title<b.title) {
            return 1
        }    else {
            return -1
        }
    });
        
        $('.row').html('');
        
        products.forEach(function(a,i){  
    var 템플릿 =
        `<div class="col-sm-4">
        <img src="https://via.placeholder.com/600" class="w-100">
        <h5>${a.title}</h5>
        <p>가격 : ${a.price}</p>
        </div>`;
    $('.row').append(템플릿)
    })
        
    })
    
    $('#filter').click(function(){
        var newProduct = products.filter(function(a){
            return a.price <= 60000
        })
        
        $('.row').html('');

            newProduct.forEach(function(a){  
        var 템플릿 =
            `<div class="col-sm-4">
            <img src="https://via.placeholder.com/600" class="w-100">
            <h5>${a.title}</h5>
            <p>가격 : ${a.price}</p>
            </div>`;
        $('.row').append(템플릿)
        })
    })
    
    /*var 어레이 = [7,3,5,2,40];
    어레이.sort(function(a,b){
        return a - b
    });
    console.log(어레이);
     //a 와 b 는 array 안의 자료임.
    //return 오른쪽이 양수면 a를 오른쪽
    //return 오른쪽이 음수면 b를 오른쪽으로 옮김
    
    var 어레이2 = ['a','c','b']
    어레이2.sort(function(a,b){
        if(a>b){
            return -1;
        } else if (a<b){
            return 1;
        } else {
            return 0;
        }
    });
    console.log(어레이2);*/
    
   /* var 어레이3 = [7,3,5,2,40];
    var 새어레이 = 어레이3.filter(function(a){
        return a < 4
    });
    console.log(새어레이);*/
    // .sort()는 원본 변형O
    // .filter()는 원본 변형X a*4 등 산수 가능
    
    
    
    
    products.forEach(function(a,i){  
    var 템플릿 =
        `<div class="col-sm-4">
        <img src="https://via.placeholder.com/600" class="w-100">
        <h5>${a.title}</h5>
        <p>가격 : ${a.price}</p>
        <button class="buy">구매</button>
        </div>`;
    $('.row').append(템플릿)
    })
    
    /*1.구매버튼누르면
    2.지금누른버튼 윗윗 글자를 가져와서
    3.localStorage 에 [글자]저장*/
    
   /* $('.buy').click(function(e){
        var title = $(e.target).siblings('h5').text();
        var title_J = JSON.stringify([title]);
        //만약 이미 cart 라는 항목이 localStage 에 있으면 수정하기.
        // 하지만 아니라면 localStorage.setItem('cart',[title_J])실행
        
        if(localStorage.getItem('cart') != null){
                var 꺼낸거 = JSON.parse(localStorage.cart);
                꺼낸거.push(title);
                localStorage.setItem('cart', JSON.stringify(꺼낸거));
           } else {  
           localStorage.setItem('cart',title_J);
                    }
    })*/
    
    $('.buy').click(function(e){
    var title = $(e.target).siblings('h5').text();
    var cartItems = localStorage.getItem('cart');

    // 만약 cartItems가 존재하면, 로컬 스토리지에서 가져온 항목을 파싱하여 사용합니다.
    if (cartItems) {
        cartItems = JSON.parse(cartItems);

        // 이미 구매한 상품인지 확인하고, 있으면 수량을 증가시키고, 없으면 새로운 항목을 추가합니다.
        var found = false;
        for (var i = 0; i < cartItems.length; i++) {
            if (cartItems[i].title === title) {
                cartItems[i].num++;
                found = true;
                break;
            }
        }
        if (!found) {
            cartItems.push({ title: title, num: 1 });
        }
    } else {
        // 만약 로컬 스토리지에 cart가 없으면 새로운 배열을 생성합니다.
        cartItems = [{ title: title, num: 1 }];
    }

    // 수정된 cartItems를 로컬 스토리지에 저장합니다.
    localStorage.setItem('cart', JSON.stringify(cartItems));
});
    
    /*localStorage.setItem('이름','kim')
    localStorage.removeItem('이름');
    localStorage.getItem('이름');
    
    var arr = [1,2,3];
    var newArr =  JSON.stringify(arr);
    
    localStorage.setItem('num', newArr);
    var 꺼낸거 = localStorage.getItem('num');
    console.log(JSON.parse(꺼낸거));*/
    
    
    
        </script>
        
        <div class="container">
        <button class="btn btn-danger" id="more">더보기</button>
        </div>
        
        <script>
        
        // 초기 클릭 횟수를 저장할 변수
        var clickCount = 1;

        $('#more').click(function(){
            // 클릭 횟수에 따라 다른 URL에서 데이터를 가져옴
            var url = '';
                if(clickCount === 1){
                    url = 'https://codingapple1.github.io/js/more1.json';
                } else if(clickCount ===2){
                    url = 'https://codingapple1.github.io/js/more2.json';
                }

            // GET 요청을 통해 데이터를 가져옴
            $.get(url).done(function(data){
                console.log(data);

                data.forEach(function(a, i){
                    var 템플릿 =
                    `<div class="col-sm-4">
                        <img src="https://via.placeholder.com/600" class="w-100">
                        <h5>${a.title}</h5>
                        <p>가격 : ${a.price}</p>
                    </div>`;
                    $('.row').append(템플릿);
                });

                // 클릭 횟수 증가
                clickCount++;

                // 3번째 클릭이면 더 이상 버튼을 누를 수 없도록 숨김
                if (clickCount === 3) {
                    $('#more').hide();
                }
            });
        });    
            
            
        </script>
        
        
        <script>
  /*  document.querySelectorAll('.card-body h5')[0].innerHTML = products[0].title;
    document.querySelectorAll('.card-body p')[0].innerHTML =
        '가격 : ' +products[0].price;*/
    
   /* for(let i=0; i<products.length; i++){
        document.querySelectorAll('.card-body h5')[i].innerHTML = products[i].title;
    document.querySelectorAll('.card-body p')[i].innerHTML =
        '가격 : ' + products[i].price;
    }*/
    
    for(let i=0; i<products.length; i++){
        $('.card-body h5').eq(i).html(products[i].title);
    $('.card-body p').eq(i).html('가격 : ' + products[i].price);
    }
    
    
    /*var a = '안녕';
    console.log(`문자${a}문자`);
    `문자${a}문자`*/
</script> 
        
        
        <script>
        
           /* $.get('https://codingapple1.github.io/price.json').
                done(function(data){
                console.log(data.price)
            })
            .fail(function(){
                console.log('실패함')
            })
            
            fetch('https://codingapple1.github.io/price.json')
              .then(res => res.json())
              .then(function(data){
                console.log(data)
              })
              .catch(function(error){
                console.log('실패함')
              });*/
        
        </script>
        
        <script> src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">
        </script>
        
        
 
    </body>


</html>